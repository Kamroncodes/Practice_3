const PassageArray_raw = [
    {type: "title_page",
     page: "Title_Page",
        title_page_title: "School Presentation",
        title_page_img: "images/Title-Fg1.svg",
        title_page_instructions: ["Step 1: Learn the vocabulary words", "Step 2: Read the story", "Step 3: Review", "Step 4: Practice the vocabulary",],
        title_page_icons: ["images/vocab_icon.png", "images/story_icon.png", "images/review_icon.png", "images/practice_icon.png",],
      },
    {type: "vocabulary_page",
     page: "Vocabulary_Main_Page",
        lesson_title: "School Presentation",
        passage_title: "Vocabulary",
        vocabulary_wordlist: ["presentation", "relieved", "nervous", "posture", "audience", "eye_contact", ],
        instructions: ["If you know all these words already then this story is too easy for you!"]
    },
    {type: "vocabulary_page",
     
        lesson_title: "School Presentation",
        section_title: "Vocabulary",
        subtitle: "Definition of",
        passage_title: "presentation",
        definitions:  ["a talk giving information about something"],
    },
    {type: "vocabulary_page",
     
        lesson_title: "School Presentation",
        section_title: "Vocabulary",
        subtitle: "Examples of",
        passage_title: "presentation",
        example_imgs: "",
        examples: ["1. I have to give a presentation about my favorite book.", "2. Our presentations are tomorrow.", "3. I am really good at giving presentations"],
    },
    {type: "vocabulary_page",
     
        lesson_title: "School Presentation",
        section_title: "Vocabulary",
        subtitle: "Translation of",
        passage_title: "presentation",
        translations: "พรีเซนต์",
    },
    {type: "vocabulary_page",
     
        lesson_title: "School Presentation",
        section_title: "Vocabulary",
        subtitle: "Definition of",
        passage_title: "relieved",
        definitions:  ["feeling happy because something unpleasant has stopped or you are not worried about it anymore"],
    },
    {type: "vocabulary_page",
     
        lesson_title: "School Presentation",
        section_title: "Vocabulary",
        subtitle: "Examples of",
        passage_title: "relieved",
        example_imgs: "",
        examples: ["1. I am so relieved that I passed the test.", "2. I was relieved after I finished my presentation.", "3. He looks relieved."],
    },
    {type: "vocabulary_page",
     
        lesson_title: "School Presentation",
        section_title: "Vocabulary",
        subtitle: "Translation of",
        passage_title: "relieved",
        translations: "โล่งใจ",
    },
    {type: "vocabulary_page",
     
        lesson_title: "School Presentation",
        section_title: "Vocabulary",
        subtitle: "Definition of",
        passage_title: "nervous",
        definitions:  ["worried or afraid of something"],
    },
    {type: "vocabulary_page",
     
        lesson_title: "School Presentation",
        section_title: "Vocabulary",
        subtitle: "Examples of",
        passage_title: "nervous",
        example_imgs: "",
        examples: ["1. I am nervous about my presentation.", "2. He gets nervous around new people.", "3. Are you nervous about the test?",],
    },
    {type: "vocabulary_page",
     
        lesson_title: "School Presentation",
        section_title: "Vocabulary",
        subtitle: "Translation of",
        passage_title: "nervous",
        translations: "วุ่นวาย",
    },
    {type: "vocabulary_page",
     
        lesson_title: "School Presentation",
        section_title: "Vocabulary",
        subtitle: "Definition of",
        passage_title: "posture",
        definitions:  ["the position in which you hold your body when standing or sitting"],
    },
    {type: "vocabulary_page",
     
        lesson_title: "School Presentation",
        section_title: "Vocabulary",
        subtitle: "Examples of",
        passage_title: "posture",
        example_imgs: "",
        examples: ["1. He has good posture when he stands.", "2. His posture is bad.", "3. People with good posture look more confident."],
    },
    {type: "vocabulary_page",
     
        lesson_title: "School Presentation",
        section_title: "Vocabulary",
        subtitle: "Translation of",
        passage_title: "posture",
        translations: "ท่าทาง",
    },
    {type: "vocabulary_page",
     
        lesson_title: "School Presentation",
        section_title: "Vocabulary",
        subtitle: "Definition of",
        passage_title: "audience",
        definitions:  ["the people who watch or listen to a performance, speech, etc."],
    },
    {type: "vocabulary_page",
     
        lesson_title: "School Presentation",
        section_title: "Vocabulary",
        subtitle: "Examples of",
        passage_title: "audience",
        example_imgs: "",
        examples: ["1. The audience clapped after the performance.", "2. I saw my mom in the audience.", "3. The audience was noisy during the movie."],
    },
    {type: "vocabulary_page",
     
        lesson_title: "School Presentation",
        section_title: "Vocabulary",
        subtitle: "Translation of",
        passage_title: "audience",
        translations: "ผู้ฟัง",
    },
    {type: "vocabulary_page",
     
        lesson_title: "School Presentation",
        section_title: "Vocabulary",
        subtitle: "Definition of",
        passage_title: "eye_contact",
        definitions:  ["when two people look at each other in the eyes"],
    },
    {type: "vocabulary_page",
     
        lesson_title: "School Presentation",
        section_title: "Vocabulary",
        subtitle: "Examples of",
        passage_title: "eye_contact",
        example_imgs: "",
        examples: ["1. I made eye_contact with him when I was talking.", "3. Making eye_contact is important when you are speaking.", "3. We said nothing, but made eye_contact."],
    },
    {type: "vocabulary_page",
     
        lesson_title: "School Presentation",
        section_title: "Vocabulary",
        subtitle: "Translation of",
        passage_title: "eye_contact",
        translations: "สบตา",
    },
    {type: "story",
     page: "Story",
        lesson_title: "School Presentation",
        section_title: "Story",
        instructions:["Please enjoy the story. Focus on the new words you just learned.",  "Remember you can click on any word to look it up in an English Dictionary or translate it!"],
        story_text: ["I'm in the car with my dad.  He is taking me to school before he goes to work.", "\"You look a little nervous\", my dad says.  \"What about?\" he asks.", "\“At the beginning of the year everyone in class picked a book to read. Now we have to give a presentation about the book we read,\” I say.", "\“Well, I\’m sure you are prepared, but remember to keep good posture, speak slowly and clearly and look at the audience,\” my dad says.", "We arrive at the school and my dad stops the car. He tells me good luck as I get out of the car and walk into the school.", "I see my friends and say hi when I walk into the classroom.  Some of my friends don’t look like they are prepared.  They look nervous and don’t have many notes.  Others are standing near their desks practicing their speech.", "\“Good morning class,\” the teacher says, \“I’m glad to see many of you are preparing for the presentation today.  Everyone, please take a seat so we can begin.\”", "My friend Klyne raises his hand, and the teacher calls on him.", "\"Can I go first?\” Klyne asks.", "\“Before we start, I want to remind the class about four things,\” the teacher responds.  \“Students, we talked about four things we should do to give a good presentation.  Who can tell me one of them?\”", "Klyne raises his hand again.", "\“Klyne,\” the teacher calls on him again.", "\“After this can I go first?\” he asks again.", "\“Sure Klyne, but since you raised your hand, can you tell us one thing we should do to give a good presentation.\”", "Klyne takes a moment to think. \“We should speak slowly, clearly and loudly.\”", "A couple other students raise their hands.", "\“Thank you Klyne. What else?\” the teacher says as he nods to another student.", "\“We should stand up straight with good posture and don’t read from the screen the whole time,\” the student says.", "\“Thank you, that’s two important things to remember.  Tran, can you tell us the last thing?\”", "Tran had been raising his hand.  \“Look around and make eye_contact with your audience.\”", "\“Great.  Thank you.  Now, Klyne is very excited to give his presentation. Please listen carefully,\” the teacher says as Klyne goes up to the front of the classroom.", "I start to get a little nervous so hard to listen to his speech.  I will ask the teacher to go next so I can be done with my presentation.", "Klyne finishes his presentation.  \“Very good job, Klyne.  You were very well prepared,\” the teacher says as I raise my hand to ask to go next.  The teacher calls on me.", "It’s my turn.  I walk up to the front of the class, stand tall, look at my audience with a smile and begin.", "Before I know it, my presentation is over, and the teacher says \“Good work.  You had good posture and spoke very clearly.\”", "I go back to my seat.  I\’m so relieved that I\’m done!",],
    },
    {type: "review",
     page: "Review_Main_Page",
        lesson_title: "School Presentation",
        passage_title: "Review",
        instructions: ["There are two review exercises.", "We recommended doing one now and then doing the other one on another day in the near future.", ],
        exercise_selection: ["1. Match the vocabulary words to correct translation", "2. Go through the story again and fill in the missing vocabulary words", ],
    },
    {type: "review",
     page: "Review_Matching_Translation_Exercise",
     exercise: "matching_translation",
        lesson_title: "School Presentation",
        section_title: "Review",
        instructions: ["Match the words to the correct translation",],
        vocabulary_wordlist: ["presentation", "relieved", "nervous", "posture", "audience", "eye_contact", ],
    },
    {type: "review",
     page: "Review_Fill-in-the-blank_Story_Exercise",
     exercise: "cloze_story",
        lesson_title: "School Presentation",
        section_title: "Review",
        instructions: ["Fill in the blank with the correct vocabulary word", ],
        story_text: ["I'm in the car with my dad.  He is taking me to school before he goes to work.", "\"You look a little nervous\", my dad says.  \"What about?\" he asks.", "\“At the beginning of the year everyone in class picked a book to read. Now we have to give a presentation about the book we read,\” I say.", "\“Well, I\’m sure you are prepared, but remember to keep good posture, speak slowly and clearly and look at the audience,\” my dad says.", "We arrive at the school and my dad stops the car. He tells me good luck as I get out of the car and walk into the school.", "I see my friends and say hi when I walk into the classroom.  Some of my friends don’t look like they are prepared.  They look nervous and don’t have many notes.  Others are standing near their desks practicing their speech.", "\“Good morning class,\” the teacher says, \“I’m glad to see many of you are preparing for the presentation today.  Everyone, please take a seat so we can begin.\”", "My friend Klyne raises his hand, and the teacher calls on him.", "\"Can I go first?\” Klyne asks.", "\“Before we start, I want to remind the class about four things,\” the teacher responds.  \“Students, we talked about four things we should do to give a good presentation.  Who can tell me one of them?\”", "Klyne raises his hand again.", "\“Klyne,\” the teacher calls on him again.", "\“After this can I go first?\” he asks again.", "\“Sure Klyne, but since you raised your hand, can you tell us one thing we should do to give a good presentation .\”", "Klyne takes a moment to think. \“We should speak slowly, clearly and loudly.\”", "A couple other students raise their hands.", "\“Thank you Klyne. What else?\” the teacher says as he nods to another student.", "\“We should stand up straight with good posture and don’t read from the screen the whole time,\” the student says.", "\“Thank you, that’s two important things to remember.  Tran, can you tell us the last thing?\”", "Tran had been raising his hand.  \"Look around and make eye_contact with your audience .\" ", "\“Great.  Thank you.  Now, Klyne is very excited to give his presentation. Please listen carefully,\” the teacher says as Klyne goes up to the front of the classroom.", "I start to get a little nervous so hard to listen to his speech.  I will ask the teacher to go next so I can be done.", "Klyne finishes his presentation.  \“Very good job, Klyne.  You were very well prepared,\” the teacher says as I raise my hand to ask to go next.  The teacher calls on me.", "It’s my turn.  I walk up to the front of the class, stand tall, look at my audience with a smile and begin.", "Before I know it, my presentation is over, and the teacher says \“Good work.  You had good posture and spoke very clearly.\”", "I go back to my seat.  I\’m so relieved that I\’m done!",],
        vocabulary_wordlist: ["presentation", "relieved", "nervous", "posture", "audience", "eye_contact", ],
        review_button: "Check Answers",
    },
    {type: "practice",
     page: "Practice_Main_Page",
        lesson_title: "School Presentation",
        passage_title: "Practice",
        instructions: ["Now we have 4 exercises to practice using the vocabulary.", ],
        exercise_selection: ["1. Fill in the blank in an example sentence", "2. Build your own sentence", "3. Read a new story and fill in the missing words.", "4. Spell the words."],
    },
    {type: "practice",
     page: "Practice_Fill-in-the-blank_Example_Sentence_Exercise",
     exercise: "cloze_example",
        lesson_title: "School Presentation",
        section_title: "Practice",
        instructions: ["Match the words to the correct translation",],
        example_sentences: ["He was relieved that he finished on time.", "You could tell by his poor posture that he was nervous.", "We made eye_contact and said hello.", "The audience waited quielty for the show to start.", "The presentation was boring becasue I couldn't hear the speaker."],
        vocabulary_wordlist: ["presentation", "relieved", "nervous", "posture", "audience", "eye_contact", ],
        review_button: "Check Answers",
    },
    {type: "practice",
     page: "Practice_Make_Your_Own_Sentence_Exercise",
     exercise: "sentence_builder",
        lesson_title: "Introducing Yourself at School",
        section_title: "Practice",
        instructions: ["",],
        sentence_starters_word_1: "presentaion",
        sentence_starters_1: ["The presentation was about BLANK .", "The presentation was BLANK .", ],
        sentence_starters_word_2: "relieved",
        sentence_starters_2: ["I am relieved that BLANK .", ],
    vocabulary_wordlist: ["presentation", "relieved", "nervous", "posture", "audience", "eye_contact", ],
         review_button: "Check Answers",
    },
    {type: "practice",
     page: "Practice_Fill-in-the-blank_New_Story_Exercise",
     exercise: "cloze_new_story",
        lesson_title: "School Presentation",
        section_title: "Practice",
        instructions: ["",],
        new_story_text: ["\“Good morning class. Today we will be talking about how to give a good presentation,\” the teacher says at the beginning of the lesson.",  "\“First let’s watch this short video that shows some famous speakers.  Please watch closely to what they do while speaking.\”", "The teacher starts the video.  The video shows someone speaking for about a minute then changes to a new person.  I know a couple of the people in the video.", "The video finishes and the teacher asks, \“what did you notice about the people speaking?\”", "The teacher calls on someone raising their hand.  \“They all had nice clothes on,\” the student says.", "\“Good, what else Michael?\” the teacher asks another student.", "\“They all spoke slowly, loudly and clearly,\” says Michael.", "\“It was very easy to hear them, wasn’t it?\” the teacher continues to another student.", "\“They were standing straight and not moving around too much,\” the student says.", "\“Great, when someone stands up nice and straight, we can say they have good posture,\” the teacher continues. ", "\“When you have good posture, you look comfortable instead of looking nervous.  Where were the speakers looking when they spoke?\”", "\“They were looking at the audience or at the camera,\” someone responds.", "\“Yes, we won’t have a camera when we give our presentations, but it is important to look at your audience and make eye contact with the people listening,\” the teacher says.", "\“Some of you look nervous already,\” the teacher says. \“Being able to give a good speech or presentation is an important skill to have.\”", "\“What will our presentations be about?\” asks a student.", "\“I think you will be relieved because it is not something difficult. You will present about the book you choose to read this year,\” the teacher says.", "I am relieved.  It should be easy to tell everyone about the book I read.",],
    vocabulary_wordlist: ["presentation", "relieved", "nervous", "posture", "audience", "eye_contact", ],
        review_button: "Check Answers",
    },
    {type: "practice",
     page: "Practice_Spelling_Exercise",
     exercise: "spelling",
        lesson_title: "School Presentation",
        section_title: "Practice",
        instructions: ["",],
        review_button: "Check Answers",
    audio_tags: ["./public/audio/presentation.mp3", "./public/audio/relieved.mp3", "./public/audio/nervous.mp3", "./public/audio/posture.mp3", "./public/audio/audience.mp3", "./public/audio/eye_contact.mp3",],
    vocabulary_wordlist: ["presentation", "relieved", "nervous", "posture", "audience", "eye contact", ],
    },
    {type: "ending_page",
      lesson_title: "School Presentation",
      ending_page_img: "",
      instructions: ["Great work!", "It's ok if you didn't do all the exercises today.", "We recommend revisiting the review and practice exercises in a few days regardless."]
    },
];


const PassageArray = PassageArray_raw.map((passage) => {
  let updatedPassage = { ...passage };

  // Dynamically generate the `page` property for vocabulary pages
  if (passage.type === "vocabulary_page" && 
      passage.passage_title &&
      passage.page !== "Vocabulary_Main_Page") {
    updatedPassage.page = `Vocabulary: ${passage.subtitle} ${passage.passage_title}`;
  }

  // Adjust audio paths based on the environment
  if (passage.audio_tags) {
    if (window.location.hostname !== "localhost" && window.location.hostname !== "127.0.0.1") {
      console.log("Not running locally (e.g., production or GitHub Pages)");
      const basePath = "/Practice_3"; // Replace with your GitHub repository name or use an environment variable
      updatedPassage.audio_tags = passage.audio_tags.map((audio) =>
        `${basePath}/audio/${audio.split('/').pop()}` // Extract the file name and prepend the base path
      );
    } else {
      console.log("Running locally");
      updatedPassage.audio_tags = passage.audio_tags.map((audio) =>
        `./audio/${audio.split('/').pop()}` // Ensure the path points to the correct location in the public folder
      );
    }
  }

  if (process.env.NODE_ENV !== "production") {
    console.log("Final audio paths:", updatedPassage.audio_tags);
  }

  return updatedPassage;
});


/*
const PassageArray = PassageArray_raw.map((passage) => {
  if (passage.type === "vocabulary_page" && 
    passage.passage_title &&
    passage.page !== "Vocabulary_Main_Page") {
    return {
      ...passage,
      page: `Vocabulary: ${passage.subtitle} ${passage.passage_title}`, // Dynamically generate the `page` property
    };
  }
  return passage; // Leave other passages unchanged
});

const PassageArray = PassageArray_raw.map((passage) => {
  if (passage.audio_tags) {
    return {
      ...passage,
      audio_tags: passage.audio_tags.map((audio) => `${process.env.PUBLIC_URL}${audio.replace('./public', '')}`), // Adjust audio paths
    };
  }
  return passage; // Leave other passages unchanged
});
*/

export default PassageArray;